<html>
<head>
<title>Hive.Loans - v0.0.8</title>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css">
<link rel="stylesheet" href="/css/mainstatic.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css"/>
<link rel="stylesheet" href="/css/contextMenu.css"/>
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
<script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.7.1/jquery.contextMenu.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.7.1/jquery.ui.position.js"></script>
<script src="/js/packages/particles.min.js"></script>
</head>
<body class="context" >
<div id="particles-js" onclick="$('.iw-contextMenu').contextMenu('destroy'); $('.iw-cm-menu').contextMenu('destroy');" onmouseover="$('#menufuckery').fadeOut(); $('#menufuckery2').fadeOut();"></div>
<div class="navbar" style="padding-left: 0em;">
  <span id="logospan"><i class="fas fa-2x fa-flip-horizontal fa-hand-holding-heart sexyblackoutline"></i><i class="fab fa-3x fa-hive sexyblackoutline"></i><i class="fas fa-2x fa-hand-holding-heart sexyblackoutline"></i></span><b id="handy" class="sexyblackoutline" style="padding-left:0.5em; top: 0em !important; font-variant: petite-caps !important;">Hive.Loans</b>
  <nav style="float:right;">
    <ul class="menu sexyblackoutline">
      <li id="profile" class="menu-sub-item hidden" onmouseover="$('#menufuckery').fadeIn();$('#menufuckery2').fadeOut();" onmousedown="$('#menufuckery').fadeOut();"> <!--.addClass('hidden')    $('#menufuckery').fadeOut();-->
        <a onClick="showProfile()"><b><i class="fas fa-fw fa-user"></i> Profile</b></a>
        <span id="menufuckery" class="" onload="$('#menufuckery').hide();">
          <center><ul id="usernamestoreul"><b>@<span id="usernamestore"></span></b></ul></center>
          <hr id="profilehorizon">
          <ul id="wallet" class="submenushit hidden"><li><a onClick="showWallet(uUsername)"><b><i class="fas  fa-fw fa-wallet"></i> Wallet</b></a></li></ul>
          <ul id="tools" class="submenushit hidden"><li><a onClick="showTools();"><b><i class="fas  fa-fw fa-tools"></i> Tools</b></a></li></ul>
          <ul id="settings" class="submenushit hidden"><li><a onClick="showSettings()"><b><i class="fas  fa-fw fa-cogs"></i> Settings</b></a></li></ul>
          <ul id="profilelogout" class="submenushit hidden"><li><a onClick="logout();"><b><i class="fas  fa-fw fa-door-open"></i> Log Out</b></a></li></ul>
        </span>
      </li>
      <li id="loansmenu" class="menu-sub-item hidden" onmouseover="$('#menufuckery2').fadeIn();$('#menufuckery').fadeOut();" onmousedown="$('#menufuckery2').fadeOut();"> <!--.addClass('hidden')    $('#menufuckery').fadeOut();-->
        <a onClick="showLoansMixed()"><b><i class="fas fa-landmark"></i> Loans</b></a>
        <span id="menufuckery2" onload="$('#menufuckery2').hide();">
          <ul id="lend" class="submenushit hidden"><li><a onClick="showLend()"><b><i class="fas  fa-fw fa-chart-line"></i> Lend</b></a></li></ul>
          <ul id="loans" class="submenushit hidden"><li><a onClick="showLoans()"><b><i class="fas fa-fw fa-comments-dollar"></i> Borrow</b></a></li></ul>
        </span>
      </li>

      <li><a id="shares" class="hidden" onClick="showShares()"><b><i class="fas fa-fw fa-chart-pie"></i> Dividends</b></a></li>
      <li><a id="futures" class="hidden" onClick="showFutures()"><b><i class="far fa-fw fa-chart-bar"></i> Futures</b></a></li>
      <li><a id="faq" class="hidden" onClick="showFaq();"><b><i class="fas fa-fw fa-question-circle"></i> FAQ</b></a></li>
      <li><a id="logout" class="hidden" style="float: right;"  onClick="logout();showSuccess('Logging Out Now...')"><b><i class="fas   fa-fw fa-power-off" title="Power Off / Logo Out"></i></b></a></li>
      <li><a id="login" class="hidden" style="float: right;" onClick="showLogin()"><b><i class="fas  fa-fw fa-sign-in-alt"></i> Login</b></a></li>
      <li><a id="menuburger" class="hidden" style="position: fixed; top: 0.7em; right: 1.1em;"><b><i class="fas   fa-fw fa-2x fa-bars"></i></b></a></li>
      <!--<li><a id="lights" class="hidden"><i class="fas  fa-fw fa-adjust"></i></a></li>-->
      <li><a id="arrowin" class="hidden" style="float: right;" onClick="navbarBlitz()"><i class="fas  fa-fw fa-chevron-right" title="Click here to Grow Menu"></i></a></li>
    </ul>
  </nav>
</div>
<div class="content iw-mTrigger" onclick="$('.iw-contextMenu').contextMenu('destroy'); $('.iw-cm-menu').contextMenu('destroy');">
  <div id="loadingscreenblack" style="position: fixed !important; top:0; left:0; display: block !important; min-height:100% !important; min-width:100% !important; background:#000000 !important; background-color:#000000 !important; z-index:999999999 !important;margin: 0px;">
  <center>
    <span id="firstload" style="width: auto; height: auto; position: fixed; display: contents; top: 45%;">
      <h3 style="color: white;">Welcome to the Pre-Alpha Development Preview of</h3><h1 style="font-size:5.5em;">Hive.Loans</h1>
        <img src="/img/redhive.svg" id="mainLogo" style="filter: drop-shadow(0px 0px 6px white); width:20vh; padding:20px;"><br>
          <h5>Note: This is an unfinished and untested development version of the application.<br>Some features may be missing, broken or even worse contain dangerous bugs still.<br>It's highly recommended you wait until the full launch to start exploring the site!</h5>
          <h3 style="color: white;"><b><span id="dotdotdot">Loading Code and Assets<span>.</span><span>.</span><span>.</span></span></b></h3>
        </span>
  </center>
  </div>
  <!--END loadscreen>
  <span id="userstats" class="userstats hidden" style="padding:5px;text-align: center">
  <span id="statsMove" title="Click and Drag to Move Window"><i class="fas fa-arrows-alt"></i></span><span id="statsName" style="display: inline-block">Loading</span> HIVE Account<span id="refreshAcct" style-"float:right" title="Click to Refresh" onClick="getAcct();"><i class="fas fa-sync"></i></span><hr>
  <span id="statsWrapper">
  <span id="statsBal"><b>HIVE Balance</b>:<br>Loading<br></span><br>
  <span id="statHBDsBal"><b>HBD Balance</b>:<br>Loading<br></span><br>
  <span id="hivePowerHeld"><b>HIVE Power</b>:<br>Loading<br></span><br>
  <span id="recoverAcct"><b>Recovery Account</b>:<br><br><span id="recName">Loading</span><br></span><br>
  <span id="recAlert"></span><br>
  </span>
  </span>-->
  <!--END userstats-->
  <span id="backerstats" class="backerstats " style="padding:5px;text-align: center; height: auto !important;">
    <div id="backerHead"><span id="backerMove" title="Click and Drag to Move Window"><i class="fas fa-arrows-alt"></i></span><span id="backersClose" title="Click to Close this Panel" onclick="$('#backerstats').fadeOut();" onmouseover="$(this).css({'color':'red'})" onmouseout="$(this).css({'color':'white'})"><i class="fas fa-times"></i></span></div>
      <span id="backerWrapper">
        <b style="color:gold;" class="sexyblackoutline">Winner of<br>Benefactor Rank</b><br><b style="font-size:x-large;">ðŸ‘‘@CoinInstant</b>
      </span><!--END statwrapper-->
  </span>


  <span id="alertpanel" class="alertpanel hidden" style="padding:5px;text-align: center; height: auto !important;">
    <div id="alertHead"><span id="alertMove" title="Click and Drag to Move Window"><i class="fas fa-arrows-alt"></i></span><span id="alertTitle">Alert</span><span id="alertClose" class="hidden" title="Click to Close this Panel" onclick="$('#alertpanel').fadeOut();" onmouseover="$(this).css({'color':'red'})" onmouseout="$(this).css({'color':'white'})"><i class="fas fa-times"></i></span></div>
      <span id="alertWrapper">
        This is an alert panel
      </span><!--END alertWrapper-->
  </span>


<span id="chatpanel" class="chatpanel hidden" style="padding:5px;text-align: center; bottom:1vh !important; right:15vw !important; height:50%; width:15%;">
  <div id="chatHead"><span id="chatMove" title="Click and Drag to Move Window"><i class="fas fa-arrows-alt"></i></span><span id="chatName" style="display: inline-block">Loading</span><span id="chatClose" title="Click to Close this Panel" onclick="$('#chatpanel').fadeOut();" onmouseover="$(this).css({'color':'red'})" onmouseout="$(this).css({'color':'white'})"><i class="fas fa-times"></i></span></div>
    <span id="chatWrapper">
      <span id="chatContent" style="text-align: left !important;">
        <div id="chat">
          <ul id="trollbox"></ul>
        </div>
        <div class="input-group" id="chatinputwidget">
          <input type="text" id="trollslot" class="form-control" placeholder="Type a message here and hit enter or button to live chat" autocomplete="off" onfocus="this.placeholder = '';" onblur="this.placeholder = ''" aria-describedby="basic-addon1" style="color: white;">
          <button type="button" class="sendchat button button.green sextext" id="sendChat"><i class="fas fa-paper-plane"></i></button>
        </div>
      </span>
    </span><!--END chatwrapper-->
</span><!--END chatpanel-->


<span id="sitealertpanel" class="sitealertpanel" style="padding:5px;text-align: center; top:20%; height:30%; width:15%;">
  <div id="alertHead"><span id="alertMove" title="Click and Drag to Move Window"><i class="fas fa-arrows-alt"></i></span>
    <span id="alertName" style="display: inline-block"><i class="fa fa-exclamation-triangle sexyblackoutline" style="color:gold;" aria-hidden="true"></i> ALERT: <span id="spanMessage">Unfinished Alpha Testing!</span></span>
    <span id="alertClose" title="Click to Close this Panel" onclick="$(this).fadeOut();" onmouseover="$(this).css({'color':'red'})" onmouseout="$(this).css({'color':'white'})"><i class="fas fa-times"></i></span>
  </div>
    <span id="alertWrapper">
      <span id="alertContent"><br>This site is an Unfinished Alpha and does not represent the production version of Hive.Loans!<br>
        <br>This site contains feautures that can change account ownership. Be aware that when you're exploring this alpha version some functions may work and others may not function correctly or at all!<br>
        <br>By hitting ACCEPT below you acknowledge this is an alpha and Hive.Loans is not responsible for any potential damages to account or balances<br>
        <button type="button" class="button sextext" id="closeAlertButton" onclick="$('#sitealertpanel').fadeOut();">ACCEPT</button></span>
    </span>
</span>


<!--<span id="userpanel" class="userpanel hidden" style="padding:5px;text-align: center; top:20%; height:55%; width:55%;">
  <span id="panelMove" title="Click and Drag to Move Window"><i class="fas fa-arrows-alt"></i></span><span id="panelName" style="display: inline-block">Loading</span><span id="panelClose" title="Click to Close this Panel" onclick="$('#userpanel').fadeOut();" onmouseover="$(this).css({'color':'red'})" onmouseout="$(this).css({'color':'black'})"><i class="fas fa-times"></i></span><hr>
    <span id="panelWrapper">
      <span id="panelContent"></span>
    </span>
</span>-->

  <!--<span id="sitestats" class="sitestats hidden" style="padding:5px;text-align: center;left:70%; height:auto;">
    <span id="sitestatssMove" title="Click and Drag to Move Window"><i class="fas fa-arrows-alt"></i></span><span id="sitestatsName" class="sitestatsName" style="display: inline-block"></span><span id="refreshSiteStats" style-"float:right" title="Click to Refresh" onClick="getSiteStats();"><i class="fas fa-sync"></i></span><hr>
      <span id="resizablesitestats" class="ui-widget-content">
        <span id="sitestatsBal"><b>Available HIVE Pool</b>:<br>Loading<br></span><br>
        <span id="siteLoaned"><b>HIVE Loaned Out</b>:<br>0.000<br></span><br>
        <span id="sitePaid"><b>HIVE Repaid</b>:<br>0.000<br></span><br>
        <span id="siteProfit"><b>HIVE Lender Profit</b>:<br>0.000<br></span><br>
        <span id="siteOnLoan"><b>HIVE Outstanding</b>:<br>0.000<br></span><br>
        <span id="siteInterest"><b>Average Interest Rate</b>:<br>0.000%<br></span><br>
        <span id="siteTotalActive"><b>Total Active Loans</b>:<br>0<br></span><br>
        <span id="siteTotalEnded"><b>Total Ended Loans</b>:<br>0<br></span><br>
        <span id="siteLoanTotal"><b>Total Loan Contracts</b>:<br>0<br></span><br>
        <span id="siteAlert"></span><br>
        <i class="fas fa-vector-square resizer"></i>
      </span>
  </span>-->

  <div class="jumbotron sexyblackoutline" id="jumbotron" style="box-shadow: black 0px 0px 14px 0px; height: 85%; width:auto; display: block;top:6%; border: 2px outset #eae6e6; border-radius: 15px; color: white !important; background: grey;position:fixed;padding-left:10px;padding-right:10px;" onload="setTimeout(function(){$(this).center()}, 100);">
    <div id="jumboHead"><span id="jumboMove" title="Click and Drag to Move Window"><i class="fas fa-arrows-alt"></i></span><center><span id="jumboTitle" class="jumboTitle"></span></center><span id="jumboClose" title="Click to Close this Panel" onclick="$('#jumbotron').fadeOut();" onmouseover="$(this).css({'color':'red'})" onmouseout="$(this).css({'color':'white'})"><i class="fas fa-times"></i></span></div>
      <center><span id="jumboWrapper">
        <h2 class="sexyblackoutline" style="margin-top:0.25em;margin-bottom:0">P2P Capital Lending Contracts on Hive.Loans</h2> <!--Hive.Loans Secured Lending Contract Platform-->
        <span style="font-size:xx-large">Building a Gateway for Peer to Peer Liquidity Borrowing</span><br><br>
        <h6 id="supportyourlocaldeveloper" style="font-size:smallest !important; text-decoration: none !important;margin:0 !important;"><a  target="_blank" href="https://peakd.com/proposals/154" style="font-size:large !important; text-decoration: none !important; color:white !important;letter-spacing: initial;"><i class="fas fa-hand-point-right" style="color:white;"></i> Moving HIVE Forwards 3 Seconds at a Time - View <u><b style="color:#ededed;">Proposal #154</b></u> funding this project by <b style="color:#ededed;">clicking here</b> <i class="fas fa-hand-point-left" style="color:white;"></i></a></h6><br><br>
        <span id='leftflash'><i class="fas fa-2x fa-flip-horizontal fa-hand-holding-heart lefthand sexyblackoutline"  style="filter: drop-shadow(2px 4px 6px black) !important;"></i></span><img src="/img/redhive.svg" id="mainLogo" onclick="showLogin();" style="filter: drop-shadow(2px 4px 6px black); width:30vh;"><span id='rightflash'><i class="fas fa-2x fa-hand-holding-heart righthand sexyblackoutline"></i></span><br><br>
        <button type="button" style="" onclick="showLogin();" id="splashButton" class="button" title="Click here to verify your HIVE account">CLICK to BEGIN</button> <!--onclick="showLogin()"     onclick="window.location='https://peakd.com/me/proposals/154'"  -->
        <h3 class="sexyblackoutline" style="color:white;">Soon Offering Secure Lending Transactions, HIVE Borrowing and Liquidity Swapping</h3>
        <h3 class="sexyblackoutline" style="color:white;">Zero Lender Risk Loans - <i>"Set it and Forget it"</i> - Earn 10% to 30% Profit*</h3>
        <h3 class="sexyblackoutline" style="color:white;">Use Your Account as Collateral to Borrow up to 70% of its HIVE Value</h3>
        <h5 class="sexyblackoutline" style="color:white;"><br>Congrats to @CoinInstant for winning the backer leaderboard auction winning the <b style="color:gold;">Benefactor</b> ranking!</h5>
        <h6><i class="fa fa-exclamation-triangle sexyblackoutline" style="color:gold;" aria-hidden="true"></i> <b>WARNING</b>: This unfinished and untested alpha web application contains functions that can modify account priveledges if provided with valid inputs. Be careful when clicking around!</h6>
      </span><!--END jumboWrapper-->
    </center>
  </div>

</div><!--END content-->
 <footer style="padding:1vh;" class="sexyblackoutline">
   <b>&copy; 2021 Hive.Loans <code>v0.0.8 Pre-Alpha</code></b>
   <span class="footersplitter"></span>
   <b><span id="blocknumber">#0</span></b>
   <span class="footersplitter"></span>
   <span id="pricecheck">1 HIVE / Loading</span>
     <span id="pricepercentticker"><code><sub>| Total Supply: -------.--- | Market Cap: $-------.-- USD | Daily Volume: $-------.-- USD | Last Hour: -.--% | Last Day: -.--% | Past Week: -.--% | Past Month: -.--%</code></sub></span>
   <span id="discord" style="color:#f0f0f8 !important;text-decoration: none !important;">Need Help or Have Questions? <a href="https://discord.gg/mtwvCpS" target="_blank" rel="noopener noreferrer" style="color:#f0f0f8 !important;text-decoration: none !important;"><i class="fab fa-fw fa-2x fa-discord sexyblackoutline" style="padding-left:0.5em;padding-right:0.5em;color:#f0f0f8; float:right;margin-right: 2vw; font-size: 1.5em !important; line-height: 0.75em !important; "></i> <b>Join Our Discord</b> <i class="fas fa-angle-right"></i></a></span>
   <span id="github" style='color: #f0f0f8;float: right;margin-top: -0.22em;margin-right: 1.3em;vertical-align: middle;'><a href="https://github.com/KLYE-Dev/hive.loans" target="_blank" rel="noopener noreferrer" style="z-index: 999999; color:#f0f0f8 !important;text-decoration: none !important;"><i class="fab fa-fw fa-2x fa-github-square sexyblackoutline" style="padding-left:0.5em;padding-right:0.5em;color:#f0f0f8; float:right; font-size: 1.5em !important; line-height: 0.75em !important; "></i></a></span>
 </footer>
 <!--<span id="usernamestore"></span>--><span id="socketid"></span><span id="plugintype"></span><span id="useraddress"></span><span id="newamount"></span><span id="newdays"></span><span id="newfee"></span><span id="userrank"></span>
</body>
</html>
<script src="https://cdn.jsdelivr.net/npm/hivesigner@3.2.1/dist/hivesigner.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@hiveio/hive-js/dist/hive.min.js"></script>
<script src="/js/packages/jquery.min.js"></script>
<script src="/js/packages/jquery-ui/jquery-ui.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="/js/packages/countup.js"></script>
<script src="/js/packages/bootstrap.js"></script>
<script src="/js/packages/bootstrap-table.min.js"></script>
<script src="/js/packages/bootbox.min.js"></script>
<script src="/js/packages/alertify.min.js"></script>
<script src="/js/packages/colorFader.js"></script>
<script src="/js/packages/contextMenu.min.js"></script>
<script src="/js/packages/openpgp.min.js"></script>
<script src="/js/packages/aes256.js"></script>
<script src="/js/dialogs.js"></script>
<script src="/js/variables.js"></script>
<script src="/js/actions.js"></script>
<script src="/js/visuals.js"></script>
<script src="/js/functions.js"></script>
<script src="/js/connections.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script>
<script>
//window.addEventListener('load', renderChart, false);
hive.api.setOptions({ url: 'https://api.hive.blog' });



var keyChainEnabled = 0;

window.onload = function() {
  $('#loadingscreenblack').center();
  $("#firstload").center();
  if (window.hive_keychain) {
      hive_keychain.requestHandshake(function() {
          keyChainEnabled = 0;
          console.log("Hive Keychain Handshake Detected!");
      });
  }
  //CountDownTimer('02/15/2021 0:0 AM', 'countdown');
  //getSiteStats();
  //history.pushState("",null, "https://hive.loans");
}

$("#menuburger").on('click', function() {
  alert("MENU!");
});

var hivesignerclient = new hivesigner.Client({
  app: 'hive.loans',
  //callbackURL: 'http://127.0.0.1:80', //testing locally
  callbackURL: 'https://hive.loans',    //production
  scope: ['login', 'active']
});

let usercheck = window.localStorage.getItem("user");
let tokencheck = window.localStorage.getItem("token");
let user = usercheck;

let linkColor = "white";

var hiveVested;

var currentURL = window.location.href;
currentURL = currentURL.substring("?access_token=", "&username=");
function getJsonFromUrl(url) {
  if(!url) url = location.search;
  var query = url.substr(1);
  var result = {};
  query.split("&").forEach(function(part) {
    var item = part.split("=");
    result[item[0]] = decodeURIComponent(item[1]);
  });
  return result;
}

var success = getJsonFromUrl(currentURL);

tokencheck = success.access_token;

if(success.username != null || success.username != undefined){
  user = success.username;
}
if(success.access_token != null || success.access_token != undefined){
  token = success.access_token;
}
if(user != null || user != undefined){
  window.localStorage.setItem("user", user);
} else {
  user = window.localStorage.getItem("user");
}
if(token != null || token != undefined){
  window.localStorage.setItem("token", token);
} else {
  token = window.localStorage.getItem("token");
}

if (token != null && token != undefined && keyChainEnabled === 1){
  $("#statsBalTop").html(`<b>Loading Wallet<span id="dotdotdot"><span>.</span><span>.</span><span>.</span></span></b>`);
  hivesignerclient = new hivesigner.Client({
      app: 'hive.loans',
      //callbackURL: 'http://127.0.0.1', //testing locally
      callbackURL: 'https://hive.loans',    //production
      accessToken: token,
    scope: ['login', 'active']
    });
  hivesignerclient.setAccessToken([token]);

    $("#userstats").removeClass('hidden');
    $("#acct").removeClass('hidden');
    $("#loans").removeClass("hidden");
    $("#lend").removeClass("hidden");
    $("#tools").removeClass("hidden");
    $("#wallet").removeClass("hidden");
    $("#login").addClass('hidden');
    $("#logout").removeClass('hidden');
    $("#arrowin").removeClass('hidden');

  hivesignerclient.me(function (err, res) {
      if(err){
        console.log(err);
        $("#userstats").addClass('hidden');
        $("#acct").addClass('hidden');
        $("#loans").addClass("hidden");
        $("#lend").addClass("hidden");
        $("#tools").addClass("hidden");
        $("#wallet").addClass("hidden");
         $("#login").addClass('hidden');//$("#login").removeClass('hidden');
        $("#logout").addClass('hidden');
        $("#arrowin").addClass('hidden');
      }
      if(res == null) return;
      var total_vesting_shares;
      var total_vesting_fund;
      var hiveVested;
      var statsName = res.name;
      var acct = res.account;
      var statsBal = acct.balance;
      var statsBalTop = acct.balance;
      var statsHBDBal = acct.hbd_balance;
      var recoverAcct = acct.recovery_account;
      var hivePower = parseInt(acct.vesting_shares);
      loginPush(res.name, token);
      hive.api.getDynamicGlobalProperties(function(err, result) {
        if(err){console.log(err)}
        total_vesting_shares = parseInt(result.total_vesting_shares);
        total_vesting_fund = parseInt(result.total_vesting_fund_steem);
        console.log(`total_vesting_shares: ${total_vesting_shares}`);
        console.log(`total_vesting_fund: ${total_vesting_fund}`);
        console.log(`hivePower: ${hivePower}`);
        hiveVested = ( Number(total_vesting_fund) *  Number(hivePower) ) / Number(total_vesting_shares);
        console.log(`hiveVested: ${hiveVested}`);
        $("#hivePowerHeld").html(`<b>HIVE Power</b>:<br>${toThree(hiveVested)}<br>`);
        $("#statsName").html(`@${statsName}`);
        $("#statsBal").html(`<b>HIVE Balance</b>:<br>${statsBal}<br>`);
        $("#statsBalTop").html(`<b>${statsBalTop} ${statsHBDBal}</b>`);
        $("#statHBDsBal").html(`<b>HBD Balance</b>:<br>${statsHBDBal}<br>`);
        $("#recoverAcct").html(`<b>Recovery Account</b>:<br><span id="recName"><a href='https://hiveblocks.com/@${recoverAcct}' target="_blank" style="color:${linkColor};">@${recoverAcct}</span?</span><br>`);
        if(recoverAcct != 'hive.loans' && recoverAcct != 'anonsteem' && recoverAcct != 'beeanon' && recoverAcct != 'blocktrades') {
          $("#recName").css({"color":"red"});
          linkColor = "red";
          $("#recAlert").html(`<sub><b style="color:red;">Recovery Account Invalid!</b><br>Please set @hive.loan as recovery account! Click here to change recovery account<br><sub>( This will take 30 days to complete )</sub></sub>`);
        } else {
          $("#recName").css({"color":"lawngreen !important","font-weight":"700"});
          linkColor = "lawngreen";
          $("#recAlert").html(`<sub><b style="color:black;">Recovery Account Valid!</b><br>You're ready to borrow! Don't change your recovery account during while borrowing!<br><sub>( Harsh penalties for scam attempts )</sub></sub>`);
        }
      });

  });
    //location.href = "http://127.0.0.1:5000";
    //client.setAccessToken(token);
} else {
  hivesignerclient = new hivesigner.Client({
      app: 'hive.loans',
      //callbackURL: 'http://127.0.0.1', //testing locally
      callbackURL: 'https://hive.loans',    //production
    scope: ['login', 'active']
    });
    $("#login").removeClass("hidden");
    $("#acct").addClass('hidden');
    $("wallet").addClass('hidden');
    $("#logout").addClass("hidden");
    $("#tools").addClass("hidden");
    $("#wallet").addClass("hidden");
    $("#loans").addClass("hidden");
    $("#lend").addClass("hidden");;

}


function login() {
  var params = {
    app: 'hive.loans',
    //callbackURL: 'http://127.0.0.1:80', //testing locally
    callbackURL: 'https://hive.loans',    //production
    scope: ['login', 'active']
  }
  if (hivesigner.useHiveKeychain) {
    params = {username: $('#usernameinput').val()};
  }

  hivesignerclient.login(params, function(err, token) {
    if(err) console.log(err);
    console.log(token);
  });
}//end function login

function logout() {
  hivesignerclient.revokeToken(function (err, res) {
  if(err){
    console.log(err);
    window.localStorage.clear();
    location.reload(true);
    //location.href = 'https://hive.loans';//"http://127.0.0.1:80";
  }
  if(res){
    console.log(res);
    window.localStorage.clear();
    location.reload(true);
    //location.href = 'https://hive.loans';
  }
});
}







function withdraw(amount, type, user){
  console.log(`withdraw(${amount}, ${type}, ${user})`);
  /*
  const op = ['transfer', {
    from: '__signer',
    to: 'hive.loans',
    amount: amount + " " + type.toUpperCase(),
    memo: '__signer'
  }];
  hivesigner.sendOperation(op, {}, function(err, result) {
    if(err){alert("Transfer Failed to Send!")}
    if(result){
      return console.log(result);
    }
  });
  */
}

function withdrawPopup(amount, type, user){
  var withdraw = window.prompt("How Much HIVE do You Wish to Withdraw?", "");
  if (!withdraw) {
    console.log(`User Cancelled the Withdraw`);
  };
  if(withdraw <= 1){
    showErr("Your Withdraw Must be Greater Than 1!");
  } else if (isNaN(dep)) {
    showErr("Invalid Withdraw Amount!");
  } else {
    withdraw(amount, type, user);
  }
}

/*
function renderPage(id){
  console.log(`renderPage: ${id}`);
  $("#jumbotron").load(id);
  if(currentURL.length > 25){
    window.history.pushState(" ", " ",  window.location.hostname);
  }
}
*/

$("#statsMove").mousedown(function() {
  $( "#userstats" ).draggable();
});

$("#panelMove").mousedown(function() {
  $( "#userpanel" ).draggable();
});

$("#backerMove").mousedown(function() {
  $( "#backerstats" ).draggable();
});

$("#sitestatssMove").mousedown(function() {
  $( "#sitestats" ).draggable();
});

$("#chatMove").mousedown(function() {
  $( "#chatpanel" ).draggable();
});

$("#alertMove").mousedown(function() {
  $( "#alertpanel" ).draggable();
});

$("#jumboMove").mousedown(function() {
  $("#jumbotron").draggable();
});

$( function() {
  $( "#resizablesitestats" ).resizable();
} );

$(".resizer").mousedown(function() {
  console.log("resizer enabled");
  $(this).parent().resizable();
});

$( ".selector" ).resizable({
  autoHide: true
});


alertify.defaults = {
        // dialogs defaults
        autoReset:true,
        basic:false,
        closable:true,
        closableByDimmer:true,
        invokeOnCloseOff:false,
        frameless:false,
        defaultFocusOff:false,
        maintainFocus:false, // <== global default not per instance, applies to all dialogs
        maximizable:true,
        modal:true,
        movable:true,
        moveBounded:false,
        overflow:true,
        padding: true,
        pinnable:false,
        pinned:false,
        preventBodyShift:true, // <== global default not per instance, applies to all dialogs
        resizable:true,
        startMaximized:true,
        transition:'pulse',
        transitionOff:false,
        tabbable:'button:not(:disabled):not(.ajs-reset),[href]:not(:disabled):not(.ajs-reset),input:not(:disabled):not(.ajs-reset),select:not(:disabled):not(.ajs-reset),textarea:not(:disabled):not(.ajs-reset),[tabindex]:not([tabindex^="-"]):not(:disabled):not(.ajs-reset)',  // <== global default not per instance, applies to all dialogs

        // notifier defaults
        notifier:{
        // auto-dismiss wait time (in seconds)
            delay:1,
        // default position
            position:'center-top',
        // adds a close button to notifier messages
            closeButton: true,
        // provides the ability to rename notifier classes
            classes : {
                base: 'alertify-notifier',
                prefix:'ajs-',
                message: 'ajs-message',
                top: 'ajs-top',
                right: 'ajs-right',
                bottom: 'ajs-bottom',
                left: 'ajs-left',
                center: 'ajs-center',
                visible: 'ajs-visible',
                hidden: 'ajs-hidden',
                close: 'ajs-close'
            }
        },

        // language resources
        glossary:{
            // dialogs default title
            title:'AlertifyJS',
            // ok button text
            ok: 'OK',
            // cancel button text
            cancel: 'Cancel'
        },

        // theme settings
        theme:{
            // class name attached to prompt dialog input textbox.
            input:'ajs-input',
            // class name attached to ok button
            ok:'ajs-ok',
            // class name attached to cancel button
            cancel:'ajs-cancel'
        },
        // global hooks
        hooks:{
            // invoked before initializing any dialog
            preinit:function(instance){},
            // invoked after initializing any dialog
            postinit:function(instance){},
        },
    };

 //alertify.set('notifier','position', 'left', 'close');



</script>
