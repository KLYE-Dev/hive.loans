<html>
<head>
<title>Hive.Loans - v0.0.9</title>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css">
<link rel="stylesheet" href="/css/mainstatic.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css"/>
<link rel="stylesheet" href="/css/contextMenu.css">
<link rel="stylesheet" href="/css/tickr-style-red.css">
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
<script src="/js/packages/lightweight-charts.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.7.1/jquery.contextMenu.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-contextmenu/2.7.1/jquery.ui.position.js"></script>
<script src="/js/packages/particles.min.js"></script>
</head>
<body class="context" >
<div id="particles-js" onclick="$('.iw-contextMenu').contextMenu('destroy'); $('.iw-cm-menu').contextMenu('destroy');" onmouseover="$('#menufuckery').fadeOut(); $('#menufuckery2').fadeOut();"></div>
<div class="navbar" style="padding-left: 0em;">
  <span id="logospan"><i class="fas fa-2x fa-flip-horizontal fa-hand-holding-heart sexyblackoutline"></i><i class="fab fa-3x fa-hive sexyblackoutline"></i><i class="fas fa-2x fa-hand-holding-heart sexyblackoutline"></i></span><b id="handy" class="sexyblackoutline" style="padding-left:0.5em; top: 0em !important; font-variant: petite-caps !important;">Hive.Loans</b>
  <nav style="float:right;">
    <ul class="menu sexyblackoutline">
      <li id="profile" class="menu-sub-item hidden" onmouseover="$('#menufuckery').fadeIn();$('#menufuckery2').fadeOut();" onmousedown="$('#menufuckery').fadeOut();"> <!--.addClass('hidden')    $('#menufuckery').fadeOut();-->
        <a onClick="showProfile(); navAdd(this.id);"><b><i class="fas fa-fw fa-user"></i> Profile</b></a>
        <span id="menufuckery" class="" onload="$('#menufuckery').hide();">
          <ul id="usernamestoreul"><b>@<span id="usernamestore"></span></b></ul>
          <hr id="profilehorizon">
          <ul id="admin" onClick="showAdmin(); navAdd('admin');" class="submenushit hidden"><li><a onClick=""><b><i class="fab fa-fw  fa-android"></i> Admin</b></a></li></ul>
          <ul id="wallet" onClick="showWallet(uUsername); navAdd('wallet');" class="submenushit hidden"><li><a onClick=""><b><i class="fas  fa-fw fa-wallet"></i> Wallet</b></a></li></ul>
          <ul id="tools" onClick="showTools(); navAdd('tools');" class="submenushit hidden"><li><a onClick=""><b><i class="fas  fa-fw fa-tools"></i> Tools</b></a></li></ul>
          <ul id="settings" onClick="showSettings(); navAdd('settings');" class="submenushit hidden"><li><a onClick=""><b><i class="fas  fa-fw fa-cogs"></i> Settings</b></a></li></ul>
          <ul id="profilelogout" class="submenushit hidden"><li><a onClick="logout();"><b><i class="fas  fa-fw fa-door-open"></i> Log Out</b></a></li></ul>
        </span>
      </li>
      <li id="loansmenu" class="menu-sub-item hidden" onmouseover="$('#menufuckery2').fadeIn();$('#menufuckery').fadeOut();" onmousedown="$('#menufuckery2').fadeOut();"> <!--.addClass('hidden')    $('#menufuckery').fadeOut();-->
        <a onClick="showLoansMixed(); navAdd('loansmenu');"><b><i class="fas fa-landmark"></i> Loans</b></a>
        <span id="menufuckery2" onload="$('#menufuckery2').hide();">
          <ul id="lend" onClick="showLend(); navAdd('lend');" class="submenushit hidden"><li><a><b><i class="fas  fa-fw fa-chart-line" title="Click Here to Lend HIVE"></i> Lend</b></a></li></ul>
          <ul id="loans" onClick="showLoans(); navAdd('loans');" class="submenushit hidden"><li><a><b><i class="fas fa-fw fa-comments-dollar" title="Click Here to Borrow HIVE"></i> Borrow</b></a></li></ul>
          <ul id="audit" onClick="showSiteAudit(); navAdd('audit');" class="submenushit hidden"><li><a><b><i class="fas fa-fw fa-search-dollar" title="Click Here to View Site Audit"></i> Audit</b></a></li></ul>
        </span>
      </li>

      <li><a id="shares" class="hidden" onClick="showShares();"><b><i class="fas fa-fw fa-chart-pie"></i> Shares</b></a></li>
      <li><a id="futures" class="hidden" onClick="showFutures();"><b><i class="far fa-fw fa-chart-bar" title="Click Here to Check HIVE Price Activities"></i> Price</b></a></li>
      <li><a id="faq" class="hidden" onClick="showFaq();"><b><i class="fas fa-fw fa-question-circle" title="Click Here to Read FAQ"></i> FAQ</b></a></li>
      <li><a id="chaticon" class="hidden" onclick="showChat(); $('#chaticon').addClass('hidden');" title="Click Here to Enable Chat"><b><i class="fas fa-comment-dots"></i></b></a></li>
      <li><a id="logout" class="hidden" style="float: right;"  onClick="logout();showSuccess('Logging Out Now...')"><b><i class="fas   fa-fw fa-power-off" title="Power Off / Logo Out"></i></b></a></li>
      <li><a id="login" class="hidden" style="float: right;" onClick="showLogin()"><b><i class="fas  fa-fw fa-sign-in-alt"></i> Login</b></a></li>
      <li><a id="menuburger" class="hidden" style="position: fixed; top: 0.7em; right: 1.1em;"><b><i class="fas   fa-fw fa-2x fa-bars"></i></b></a></li>
      <!--<li><a id="lights" class="hidden"><i class="fas  fa-fw fa-adjust"></i></a></li>-->
      <li><a id="arrowin" class="hidden" style="float: right;" onClick="navbarBlitz()"><i class="fas  fa-fw fa-chevron-right" title="Click here to Grow Menu"></i></a></li>
    </ul>
  </nav>
</div>
<div class="content iw-mTrigger" onclick="$('.iw-contextMenu').contextMenu('destroy'); $('.iw-cm-menu').contextMenu('destroy');">
  <div id="loadingscreenblack" style="position: fixed !important; top:0; left:0; display: block !important; min-height:100% !important; min-width:100% !important; background:#000000 !important; background-color:#000000 !important; z-index:999999999 !important;margin: 0px;">
  <center>
    <span id="firstload" style="width: auto; height: auto; position: fixed; display: contents; top: 45%;">
      <h3 style="color: white;">Welcome to the Pre-Alpha Development Preview of</h3><h1 style="font-size:5.5em;">Hive.Loans</h1>
        <img src="/img/redhive.svg" id="mainLogo" style="filter: drop-shadow(0px 0px 6px white); width:20vh; padding:20px;"><br>
          <h5>Note: This is an unfinished and untested development version of the application.<br>Some features may be missing, broken or even worse contain dangerous bugs still.<br>It's highly recommended you wait until the full launch to start exploring the site!</h5>
          <h3 style="color: white;"><b><span id="dotdotdot">Loading Code and Assets<span>.</span><span>.</span><span>.</span></span></b></h3>
        </span>
  </center>
  </div>
  <!--END loadscreen>
  <span id="userstats" class="userstats hidden" style="padding:5px;text-align: center">
  <span id="statsMove" title="Click and Drag to Move Window"><i class="fas fa-arrows-alt"></i></span><span id="statsName" style="display: inline-block">Loading</span> HIVE Account<span id="refreshAcct" style-"float:right" title="Click to Refresh" onClick="getAcct();"><i class="fas fa-sync"></i></span><hr>
  <span id="statsWrapper">
  <span id="statsBal"><b>HIVE Balance</b>:<br>Loading<br></span><br>
  <span id="statHBDsBal"><b>HBD Balance</b>:<br>Loading<br></span><br>
  <span id="hivePowerHeld"><b>HIVE Power</b>:<br>Loading<br></span><br>
  <span id="recoverAcct"><b>Recovery Account</b>:<br><br><span id="recName">Loading</span><br></span><br>
  <span id="recAlert"></span><br>
  </span>
  </span>-->
  <!--END userstats-->
  <!--
  <span id="backerstats" class="backerstats " style="padding:5px;text-align: center; height: auto !important;">
    <div id="backerHead"><span id="backerMove" title="Click and Drag to Move Window"><i class="fas fa-arrows-alt"></i></span><span id="backersClose" title="Click to Close this Panel" onclick="$('#backerstats').fadeOut();" onmouseover="$(this).css({'color':'red'})" onmouseout="$(this).css({'color':'white'})"><i class="fas fa-times"></i></span></div>
      <span id="backerWrapper">
        <b style="color:gold;" class="sexyblackoutline">Winner of<br>Benefactor Rank</b><br><b style="font-size:x-large;">ðŸ‘‘@CoinInstant</b>
      </span>
  </span>-->


  <span id="alertpanel" class="alertpanel alertphide hidden" style="padding:5px;text-align: center; height: auto !important;">
    <div id="alertHead">
      <span id="alertMove" title="Click and Drag to Move Window">
        <i class="fas fa-arrows-alt"></i>
      </span>
      <span id="alertTitle">Alert</span>
      <span id="alertClose" class="hidden" disabled title="Click to Close this Panel" onclick="$('#alertphide').fadeOut();" onmouseover="$(this).css({'color':'grey'})" onmouseout="$(this).css({'color':'grey'})">
        <i class="fas fa-times"></i>
      </span>
    </div>
      <span id="alertWrapper">
        This is an alert panel
      </span><!--END alertWrapper-->
  </span>


<span id="chatpanel" class="chatpanel hidden" style="padding:5px;text-align: center; top: 7%; bottom:1vh !important; right:15vw !important; height:50%; width:15%;">
  <div id="chatHead">
    <span id="chatMove" class="smolbutton" title="Click and Drag to Move Window"><i class="fas fa-arrows-alt"></i></span>
    <span id="chatName" style="display: inline-block">Loading</span>
    <span id="chatClose" class="smolbutton" title="Click to Close this Panel" onclick="$('#chatpanel').fadeOut(); $('#chaticon').show(); $('#chaticon').removeClass('hidden');" onmouseover="$(this).css({'color':'red'})" onmouseout="$(this).css({'color':'white'})">
    <i class="fas fa-times"></i>
    </span>
  </div>
    <span id="chatWrapper">
      <span id="chatContent" style="text-align: left !important;">
        <div id="chat">
          <ul id="trollbox"></ul>
        </div>
        <div class="input-group" id="chatinputwidget">
          <input type="text" id="trollslot" class="form-control" placeholder="Type a message here and hit enter or button to live chat" autocomplete="off" onfocus="this.placeholder = '';" onblur="this.placeholder = ''" aria-describedby="basic-addon1" style="color: white;">
          <button type="button" class="sendchat button button.green sextext" id="sendChat"><i class="fas fa-paper-plane"></i></button>
        </div>
      </span>
    </span><!--END chatwrapper-->
</span><!--END chatpanel-->


<span id="sitealertpanel" class="sitealertpanel" style="padding: 5px; text-align: center; top: 7%; height: 30%; width: 20%;">
  <div id="alertHead"><span id="alertMove" class="smolbutton" title="Click and Drag to Move Window"><i class="fas fa-arrows-alt"></i></span>
    <span id="alertName" style="display: inline-block"><i class="fa fa-exclamation-triangle sexyblackoutline" style="color:gold;" aria-hidden="true"></i> <span id="spanMessage">This Application is Under Construction</span> <i class="fa fa-exclamation-triangle sexyblackoutline" style="color:gold;" aria-hidden="true"></i></span>
    <span id="alertClose" class="smolbutton" title="Click to Close this Panel" onclick="$(this).fadeOut();" onmouseover="$(this).css({'color':'red'})" onmouseout="$(this).css({'color':'white'})"><i class="fas fa-times"></i></span>
  </div>
    <span id="alertWrapper">
      <span id="alertContent"><br>This site is an <u>Unfinished Alpha</u> in public testing!<br>This Demo Doesn't Represent the Final Production Version!<br>
        <br><b><u>NOTE</u></b>: Within are features that can change account ownership.<br>Be aware when you're exploring this early access version<br>Some functions may not operate correctly or result in bugs!<br>
        <br>By hitting ACCEPT below you acknowledge this is an alpha and Hive.Loans is not responsible for any potential damages incurred!<br>
        <button type="button" class="button sextext" id="closeAlertButton" onclick="$('#sitealertpanel').fadeOut();">ACCEPT</button></span> <button type="button" class="button sextext" id="leaveAlertButton" onclick="window.location = 'https://google.com';">LEAVE</button></span>
    </span>
</span>

  <div class="jumbotron sexyblackoutline" id="jumbotron" style="box-shadow: black 0px 0px 14px 0px; height: 85%; width:auto; display: block;top:6%; border: 2px outset #eae6e6; border-radius: 15px; color: white !important; background: grey;position:fixed;padding-left:10px;padding-right:10px;" onload="setTimeout(function(){$(this).center()}, 100);">
    <div id="jumboHead">
      <span id="jumboBack" style="left: 0.4em; color:grey;" class="smolbutton" onclick="navBack();"  title="Click to Navigate Back">
        <i class="fas fa-fw fa-arrow-left"></i>
      </span>
      <span id="jumboMove" style="left: 2.75em; color:white;" class="smolbutton" title="Click and Drag to Move Window">
        <i class="fas fa-fw fa-arrows-alt"></i>
      </span>
      <span id="jumboForward" style="left:5.1em; color:grey;" class="smolbutton"  title="Click to Navigate Forward" onclick="navForward();">
        <i class="fas fa-fw fa-arrow-right"></i>
      </span>
      <center style="width:100%;">
        <span id="jumboTitle" style="max-width: 100%;" class="jumboTitle">
          Welcome to Hive.Loans
        </span>
      </center>
      <span id="jumboClose" class="smolbutton" title="Click to Close this Panel" onclick="$('#jumbotron').fadeOut();" onmouseover="$(this).css({'color':'red'})" onmouseout="$(this).css({'color':'white'})">
        <i class="fas fa-fw fa-times"></i>
      </span>
    </div>
      <center>
        <span id="jumboWrapper">
          <h2 class="sexyblackoutline" style="margin-top:0.25em;margin-bottom:0">P2P Crypto Lending Contracts on Hive.Loans</h2> <!--Hive.Loans Secured Lending Contract Platform-->
          <span style="font-size:xx-large">A Secure Platform Facilitating Peer to Peer Liquidity Borrowing</span>
          <br><br>
          <h6 id="supportyourlocaldeveloper" style="font-size:smallest !important; text-decoration: none !important;margin:0 !important;">
            <a  target="_blank" href="https://peakd.com/proposals/154" style="font-size:large !important; text-decoration: none !important; color:white !important;letter-spacing: initial;">
              <i class="fas fa-hand-point-right" style="color:white;"></i>
                Offering a Unique to HIVE Account as Collateral Solution for the Staked Capital Issue
              <i class="fas fa-hand-point-left" style="color:white;"></i>
            </a>
          </h6>
          <br><br>
          <span id='leftflash'><i class="fas fa-2x fa-flip-horizontal fa-hand-holding-heart lefthand sexyblackoutline"  style="filter: drop-shadow(2px 4px 6px black) !important;"></i></span><img src="/img/redhive.svg" id="mainLogo" onclick="showLogin();" style="filter: drop-shadow(2px 4px 6px black); width:30vh;"><span id='rightflash'><i class="fas fa-2x fa-hand-holding-heart righthand sexyblackoutline"></i></span><br><br>
          <button type="button" style="" onclick="showLogin();" id="splashButton" class="button" title="Click here to verify your HIVE account">CLICK to BEGIN</button> <!--onclick="showLogin()"     onclick="window.location='https://peakd.com/me/proposals/154'"  -->
          <h3 class="sexyblackoutline" style="color:white;">Secure Lending Contracts - HIVE Borrowing - Liquidity Swapping</h3>
          <h3 class="sexyblackoutline" style="color:white;">Zero Lender Risk Loans - <i>"Set it and Forget it"</i> - Earn 10% to 30% Profit</h3>
          <h3 class="sexyblackoutline" style="color:white;">Account as Collateral Lending Platform - Borrow up to 70% of Your HIVE Power</h3>
          <h3 class="sexyblackoutline" style="color:white;">Profit Sharing Via Tradeable Site Shares - HIVE CFD Futures and Investing</h3>
          <!--<h6><i class="fa fa-exclamation-triangle sexyblackoutline" style="color:gold;" aria-hidden="true"></i> <b>WARNING</b>: This unfinished and untested alpha web application contains functions that can modify account priveledges if provided with valid inputs. Be careful when clicking around!</h6>-->
      </span><!--END jumboWrapper-->
    </center>
  </div>
</div><!--END content-->

 <footer style="padding:1vh;" class="sexyblackoutline">
   <b>&copy; 2021 Hive.Loans <code>v0.0.9</code></b><span class="footersplitter"></span><span id="blocknumber"><code>#</code>00000000</span><span class="footersplitter"></span><span id="pricecheck">1 HIVE = Loading</span><span class="footersplitter"></span>

   <div id="scrollerWrapper">
       <ul id="scroller">
	        <li>Total&nbsp;Supply:&nbsp;<span id="pricepercentticker" class="isabsolute"></span></li>
          <li>Market&nbsp;Cap:&nbsp;$<span id="pricepercentticker1" class="isabsolute"></span></li>
          <li>Daily&nbsp;Volume:&nbsp;$<span id="pricepercentticker2" class="isabsolute"></span></li>
          <li>Last&nbsp;Hour:&nbsp;<span id="one">?</span><span id="pricepercentticker3" class="isabsolute"></span></li>
          <li>Last&nbsp;Day:&nbsp;<span id="two">?</span><span id="pricepercentticker4" class="isabsolute"></span></li>
          <li>Past&nbsp;Week:&nbsp;<span id="three">?</span><span id="pricepercentticker5" class="isabsolute"></span></li>
          <li>Past&nbsp;Month:&nbsp;<span id="four">?</span><span id="pricepercentticker6" class="isabsolute"></span></li>
      </ul>
  </div>
   <span id="discord" style="color:#f0f0f8 !important;text-decoration: none !important;">
     <a href="https://discord.gg/mtwvCpS" target="_blank" rel="noopener noreferrer" style="color:#f0f0f8 !important;text-decoration: none !important;" title="Visit Our Discord!">
       <i class="fab fa-fw fa-2x fa-discord sexyblackoutline" style="padding-left:0.5em;padding-right:0.5em;color:#f0f0f8; float:right;margin-right: 2vw; font-size: 2em !important; line-height: 1.2em !important; "></i>
     </a>
   </span>
   <span id="github" style='color: #f0f0f8;float: right;margin-top: -0.22em;margin-right: 1.3em;vertical-align: middle;'>
     <a href="https://github.com/KLYE-Dev/hive.loans" target="_blank" rel="noopener noreferrer" style="z-index: 999999; color:#f0f0f8 !important;text-decoration: none !important;" title="Visit the Github!">
       <i class="fab fa-fw fa-2x fa-github-square sexyblackoutline" style="padding-left:0.5em;padding-right:0.5em;color:#f0f0f8; float:right; font-size: 2em !important; line-height: 1.2em !important; "></i>
     </a>
   </span>
 </footer>
<span id="socketid"></span><span id="plugintype"></span><span id="useraddress"></span><span id="newamount"></span><span id="newdays"></span><span id="newfee"></span><span id="userrank"></span>
</body>
</html>
<script src="https://cdn.jsdelivr.net/npm/hivesigner@3.2.1/dist/hivesigner.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@hiveio/hive-js/dist/hive.min.js"></script>
<script src="/js/packages/jquery.min.js"></script>
<script src="/js/packages/jquery-ui/jquery-ui.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="/js/packages/countup.js"></script>
<script src="/js/packages/bootstrap.js"></script>
<script src="/js/packages/bootstrap-table.min.js"></script>
<script src="/js/packages/bootbox.min.js"></script>
<script src="/js/packages/alertify.min.js"></script>
<script src="/js/packages/colorFader.js"></script>
<script src="/js/packages/contextMenu.min.js"></script>
<script src="/js/packages/openpgp.min.js"></script>
<!--<script src="/js/packages/aes256.js"></script>-->
<script src="/js/dialogs.js"></script>
<script src="/js/variables.js"></script>
<script src="/js/actions.js"></script>
<script src="/js/functions.js"></script>
<script src="/js/connections.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script>
<script>
//window.addEventListener('load', renderChart, false);
hive.api.setOptions({ url: 'https://api.hive.blog' });



var keyChainEnabled = 0;

window.onload = function() {
  $('#loadingscreenblack').center();
  $("#firstload").center();
  if (window.hive_keychain) {
      hive_keychain.requestHandshake(function() {
          keyChainEnabled = 0;
          console.log("Hive Keychain Handshake Detected!");
      });
  }
  //CountDownTimer('02/15/2021 0:0 AM', 'countdown');
  //getSiteStats();
  //history.pushState("",null, "https://hive.loans");
}

$("#menuburger").on('click', function() {
  alert("MENU!");
});

var hivesignerclient = new hivesigner.Client({
  app: 'hive.loans',
  //callbackURL: 'http://127.0.0.1:80', //testing locally
  callbackURL: 'https://hive.loans',    //production
  scope: ['login', 'active']
});

let usercheck = window.localStorage.getItem("user");
let tokencheck = window.localStorage.getItem("token");
let user = usercheck;

let linkColor = "white";

var hiveVested;

var currentURL = window.location.href;
currentURL = currentURL.substring("?access_token=", "&username=");
function getJsonFromUrl(url) {
  if(!url) url = location.search;
  var query = url.substr(1);
  var result = {};
  query.split("&").forEach(function(part) {
    var item = part.split("=");
    result[item[0]] = decodeURIComponent(item[1]);
  });
  return result;
}

var success = getJsonFromUrl(currentURL);

tokencheck = success.access_token;

if(success.username != null || success.username != undefined){
  user = success.username;
}
if(success.access_token != null || success.access_token != undefined){
  token = success.access_token;
}
if(user != null || user != undefined){
  window.localStorage.setItem("user", user);
} else {
  user = window.localStorage.getItem("user");
}
if(token != null || token != undefined){
  window.localStorage.setItem("token", token);
} else {
  token = window.localStorage.getItem("token");
}

if (token != null && token != undefined && keyChainEnabled === 1){
  $("#statsBalTop").html(`<b>Loading Wallet<span id="dotdotdot"><span>.</span><span>.</span><span>.</span></span></b>`);
  hivesignerclient = new hivesigner.Client({
      app: 'hive.loans',
      //callbackURL: 'http://127.0.0.1', //testing locally
      callbackURL: 'https://hive.loans',    //production
      accessToken: token,
    scope: ['login', 'active']
    });
  hivesignerclient.setAccessToken([token]);

    $("#userstats").removeClass('hidden');
    $("#acct").removeClass('hidden');
    $("#loans").removeClass("hidden");
    $("#lend").removeClass("hidden");
    $("#tools").removeClass("hidden");
    $("#wallet").removeClass("hidden");
    $("#login").addClass('hidden');
    $("#logout").removeClass('hidden');
    $("#arrowin").removeClass('hidden');

  hivesignerclient.me(function (err, res) {
      if(err){
        console.log(err);
        $("#userstats").addClass('hidden');
        $("#acct").addClass('hidden');
        $("#loans").addClass("hidden");
        $("#lend").addClass("hidden");
        $("#tools").addClass("hidden");
        $("#wallet").addClass("hidden");
         $("#login").addClass('hidden');//$("#login").removeClass('hidden');
        $("#logout").addClass('hidden');
        $("#arrowin").addClass('hidden');
      }
      if(res == null) return;
      var total_vesting_shares;
      var total_vesting_fund;
      var hiveVested;
      var statsName = res.name;
      var acct = res.account;
      var statsBal = acct.balance;
      var statsBalTop = acct.balance;
      var statsHBDBal = acct.hbd_balance;
      var recoverAcct = acct.recovery_account;
      var hivePower = parseInt(acct.vesting_shares);
      loginPush(res.name, token);
      hive.api.getDynamicGlobalProperties(function(err, result) {
        if(err){console.log(err)}
        total_vesting_shares = parseInt(result.total_vesting_shares);
        total_vesting_fund = parseInt(result.total_vesting_fund_steem);
        console.log(`total_vesting_shares: ${total_vesting_shares}`);
        console.log(`total_vesting_fund: ${total_vesting_fund}`);
        console.log(`hivePower: ${hivePower}`);
        hiveVested = ( Number(total_vesting_fund) *  Number(hivePower) ) / Number(total_vesting_shares);
        console.log(`hiveVested: ${hiveVested}`);
        $("#hivePowerHeld").html(`<b>HIVE Power</b>:<br>${toThree(hiveVested)}<br>`);
        $("#statsName").html(`@${statsName}`);
        $("#statsBal").html(`<b>HIVE Balance</b>:<br>${statsBal}<br>`);
        $("#statsBalTop").html(`<b>${statsBalTop} ${statsHBDBal}</b>`);
        $("#statHBDsBal").html(`<b>HBD Balance</b>:<br>${statsHBDBal}<br>`);
        $("#recoverAcct").html(`<b>Recovery Account</b>:<br><span id="recName"><a href='https://hiveblocks.com/@${recoverAcct}' target="_blank" style="color:${linkColor};">@${recoverAcct}</span?</span><br>`);
        if(recoverAcct != 'hive.loans' && recoverAcct != 'anonsteem' && recoverAcct != 'beeanon' && recoverAcct != 'blocktrades') {
          $("#recName").css({"color":"red"});
          linkColor = "red";
          $("#recAlert").html(`<sub><b style="color:red;">Recovery Account Invalid!</b><br>Please set @hive.loan as recovery account! Click here to change recovery account<br><sub>( This will take 30 days to complete )</sub></sub>`);
        } else {
          $("#recName").css({"color":"lawngreen !important","font-weight":"700"});
          linkColor = "lawngreen";
          $("#recAlert").html(`<sub><b style="color:black;">Recovery Account Valid!</b><br>You're ready to borrow! Don't change your recovery account during while borrowing!<br><sub>( Harsh penalties for scam attempts )</sub></sub>`);
        }
      });

  });
    //location.href = "http://127.0.0.1:5000";
    //client.setAccessToken(token);
} else {
  hivesignerclient = new hivesigner.Client({
      app: 'hive.loans',
      //callbackURL: 'http://127.0.0.1', //testing locally
      callbackURL: 'https://hive.loans',    //production
    scope: ['login', 'active']
    });
    $("#login").removeClass("hidden");
    $("#acct").addClass('hidden');
    $("wallet").addClass('hidden');
    $("#logout").addClass("hidden");
    $("#tools").addClass("hidden");
    $("#wallet").addClass("hidden");
    $("#loans").addClass("hidden");
    $("#lend").addClass("hidden");;

}


function login() {
  var params = {
    app: 'hive.loans',
    //callbackURL: 'http://127.0.0.1:80', //testing locally
    callbackURL: 'https://hive.loans',    //production
    scope: ['login', 'active']
  }
  if (hivesigner.useHiveKeychain) {
    params = {username: $('#usernameinput').val()};
  }

  hivesignerclient.login(params, function(err, token) {
    if(err) console.log(err);
    console.log(token);
  });
}//end function login

function logout() {
  hivesignerclient.revokeToken(function (err, res) {
  if(err){
    console.log(err);
    window.localStorage.clear();
    location.reload(true);
    //location.href = 'https://hive.loans';//"http://127.0.0.1:80";
  }
  if(res){
    console.log(res);
    window.localStorage.clear();
    location.reload(true);
    //location.href = 'https://hive.loans';
  }
});
}







function withdraw(amount, type, user){
  console.log(`withdraw(${amount}, ${type}, ${user})`);
  /*
  const op = ['transfer', {
    from: '__signer',
    to: 'hive.loans',
    amount: amount + " " + type.toUpperCase(),
    memo: '__signer'
  }];
  hivesigner.sendOperation(op, {}, function(err, result) {
    if(err){alert("Transfer Failed to Send!")}
    if(result){
      return console.log(result);
    }
  });
  */
}

function withdrawPopup(amount, type, user){
  var withdraw = window.prompt("How Much HIVE do You Wish to Withdraw?", "");
  if (!withdraw) {
    console.log(`User Cancelled the Withdraw`);
  };
  if(withdraw <= 1){
    showErr("Your Withdraw Must be Greater Than 1!");
  } else if (isNaN(dep)) {
    showErr("Invalid Withdraw Amount!");
  } else {
    withdraw(amount, type, user);
  }
}

/*
function renderPage(id){
  console.log(`renderPage: ${id}`);
  $("#jumbotron").load(id);
  if(currentURL.length > 25){
    window.history.pushState(" ", " ",  window.location.hostname);
  }
}
*/

$("#statsMove").mousedown(function() {
  $( "#userstats" ).draggable();
});

$("#panelMove").mousedown(function() {
  $( "#userpanel" ).draggable();
});

$("#backerMove").mousedown(function() {
  $( "#backerstats" ).draggable();
});

$("#sitestatssMove").mousedown(function() {
  $( "#sitestats" ).draggable();
});

$("#chatMove").mousedown(function() {
  $( "#chatpanel" ).draggable();
});

$("#alertMove").mousedown(function() {
  $( "#alertpanel" ).draggable();
});

$("#jumboMove").mousedown(function() {
  $("#jumbotron").draggable();
});

$( function() {
  $( "#resizablesitestats" ).resizable();
} );

$(".resizer").mousedown(function() {
  console.log("resizer enabled");
  $(this).parent().resizable();
});

$( ".selector" ).resizable({
  autoHide: true
});


alertify.defaults = {
        // dialogs defaults
        autoReset:true,
        basic:false,
        closable:true,
        closableByDimmer:true,
        invokeOnCloseOff:false,
        frameless:false,
        defaultFocusOff:false,
        maintainFocus:false, // <== global default not per instance, applies to all dialogs
        maximizable:true,
        modal:true,
        movable:true,
        moveBounded:false,
        overflow:true,
        padding: true,
        pinnable:false,
        pinned:false,
        preventBodyShift:true, // <== global default not per instance, applies to all dialogs
        resizable:true,
        startMaximized:true,
        transition:'pulse',
        transitionOff:false,
        tabbable:'button:not(:disabled):not(.ajs-reset),[href]:not(:disabled):not(.ajs-reset),input:not(:disabled):not(.ajs-reset),select:not(:disabled):not(.ajs-reset),textarea:not(:disabled):not(.ajs-reset),[tabindex]:not([tabindex^="-"]):not(:disabled):not(.ajs-reset)',  // <== global default not per instance, applies to all dialogs

        // notifier defaults
        notifier:{
        // auto-dismiss wait time (in seconds)
            delay:1,
        // default position
            position:'center-top',
        // adds a close button to notifier messages
            closeButton: true,
        // provides the ability to rename notifier classes
            classes : {
                base: 'alertify-notifier',
                prefix:'ajs-',
                message: 'ajs-message',
                top: 'ajs-top',
                right: 'ajs-right',
                bottom: 'ajs-bottom',
                left: 'ajs-left',
                center: 'ajs-center',
                visible: 'ajs-visible',
                hidden: 'ajs-hidden',
                close: 'ajs-close'
            }
        },

        // language resources
        glossary:{
            // dialogs default title
            title:'AlertifyJS',
            // ok button text
            ok: 'OK',
            // cancel button text
            cancel: 'Cancel'
        },

        // theme settings
        theme:{
            // class name attached to prompt dialog input textbox.
            input:'ajs-input',
            // class name attached to ok button
            ok:'ajs-ok',
            // class name attached to cancel button
            cancel:'ajs-cancel'
        },
        // global hooks
        hooks:{
            // invoked before initializing any dialog
            preinit:function(instance){},
            // invoked after initializing any dialog
            postinit:function(instance){},
        },
    };

 //alertify.set('notifier','position', 'left', 'close');

//TICKER shit


</script>
